<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
    </head>
    <body>
        <p id="gra"> </p>
        <script type="text/javascript">

            function miasto(zasoby, budynki, pieniadze, energia)
            {
                var self = this;
                this.zasoby = zasoby;
                this.pieniadze = pieniadze;
                this.budynki = budynki;
                this.energia = energia;
                this.ilosc = 0;
                



                this.bilans = function()
                {
                    document.getElementById("gra").innerHTML = "Posiadasz "+ this.zasoby+ " kamienia oraz "+ this.budynki+ " budynków."+"Posiadasz "+this.energia+" energii i "+this.pieniadze+" pieniedzy"+"<br>";
                }

                this.podatki = function()
                {
                    setInterval(timer, 15000);
                    function timer()
                    {
                        self.ilosc = self.budynki;
                        self.pieniadze += 100 * self.ilosc;
                        b.bilans();
                        
                    }
                }

                

                this.praca = function()
                {
                    if (this.energia >= 5)
                    {
                    this.zasoby +=10;
                    this.energia -=5;
                    b.bilans();
                    }
                    else
                    {
                        alert("za malo energii -potrzebujesz jej przynajmniej 5");
                    }
                    
                }
                this.tworzenie = function()
                {
                    if(this.zasoby >=20)
                    {
                    this.energia -=10;
                    this.budynki +=1;
                    this.zasoby -=20;
                    b.bilans();
                    b.podatki();
                    }
                    else
                    {
                        alert("Za mało zasobów musisz ich miec przynajmniej 20")
                    }
                }
            
                this.odpoczynek = function()
                {
                   if (this.energia >= 1000)
                   {
                    alert("max energii")
                   }
                   else{
                        this.energia +=10;
                        b.bilans();
                   }
                }
                

            }

            var zasoby = 0;
            var budynki = 0;
            var pieniadze = 0;
            var energia = 100; 

            var b = new miasto(zasoby, budynki, pieniadze, energia);
            b.bilans();

</script>
<table>
    <td>
        <tr><button type="button" onclick='b.praca()'>praca </button> </tr>
        <tr><button type="button" onclick='b.tworzenie()'>utworz nowy budynek</button> </tr>
        <tr><button type="button" onclick='b.odpoczynek()'>odpoczynek</button> </tr>
    </td>    
</table> 
    </body>
</html>            